<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>简单地图</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
    <style type="text/css">
        html,
        body {
            width: 100%;
            height: 100%;
        }

        * {
            margin: 0px;
            padding: 0px;
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
        }

        .wrap {
            z-index: 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        p {
            width: 603px;
            padding-top: 3px;
            overflow: hidden;
        }

        .btn {
            width: 142px;
        }

        /* 地图容器 */
        #container {
            width: 100%;
            /* 高度多5%隐藏底部腾讯logo */
            height: 105%;
            /* min-width:600px;
            min-height:767px; */

        }

        /* 城市-渔场切换按钮容器 */
        .option_frame {
            border: 1px
            /*solid*/
            #000000;
            width: 100%;
            height: 44px;
            position: fixed;
            z-index: 9;
            top: 30px;
        }

        /* 城市-渔场切换按钮 */
        .option_frame .option_button {
            border: 1px
            /*solid*/
            #000000;
            width: 60%;
            height: 36px;
            margin: 0 auto;
        }
        
        /* 城市按钮 */
        .option_frame .option_button .city {
            border-left: 1px solid #0092d4;
            border-top: 1px solid #0092d4;
            border-bottom: 1px solid #0092d4;
            width: 50%;
            height: 34px;
            color: #0092d4;
            background-color: #ffffff;
            font-size: 16px;
            text-align: center;
            line-height: 34px;
            border-top-left-radius: 5px;
            border-bottom-left-radius: 5px;
            opacity: 0.9;
            float: left;
        }

        /* 渔场按钮 */
        .option_frame .option_button .fishery {
            border-right: 1px solid #0092d4;
            border-top: 1px solid #0092d4;
            border-bottom: 1px solid #0092d4;
            width: 48%;
            height: 34px;
            background-color: #ffffff;
            color: #0092d4;
            font-size: 16px;
            text-align: center;
            line-height: 34px;
            border-top-right-radius: 5px;
            border-bottom-right-radius: 5px;
            opacity: 0.9;
            float: left;
        }

        /* 城市-渔场按钮选中时的状态 */
        .selected {
            background-color: #0092d4 !important;
            color: #ffffff !important;
            opacity: 0.9 !important;
        }

        /*卫星图切换*/
        .switchbutton {
            /* border: 1px solid #000000; */
            width: 50px;
            height: 50px;
            position: fixed;
            right: 20px;
            bottom: 100px;
            z-index: 99;
        }

        /* 卫星图切换按钮图片 */
        .switchbutton .img {
            width: 100%;
            height: 100%;
            background-image: url(./Images/wxdt.png);
            background-size: 100% 100%;
            margin-right: 8px;
            float: center;
        }

        /* 城市信息面板 */
        .cityinfopanel {
            /* border: 1px solid #000; */
            background-color: rgba(255, 255, 255, 0.95);
            width: 70%;
            height: 280px;
            position: fixed;
            left: 15%;
            bottom: 150px;
            z-index: 99;
            display: none;
            flex-direction: column;
            border-radius: 15px;
        }

        /* 城市信息面板 行 */
        .cityinfopanel-row {
            /* border: 1px solid #f00; */
            flex: 1;
            display: flex;
            flex-direction: row;
        }

        .cityinfopanel-firstrow {
            border-bottom: 1px solid #cccccc;
        }

        /* 城市信息面板 列 */
        .cityinfopanel-column {
            /* border: 1px solid #00f; */
            flex: 1;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }
        /* 城市信息面板 单元格 */
        .cityinfopanel-cell {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            font-size: 14px;
        }
        
        /* 城市信息面板 地名 */
        .cityinfopanel-location {
            flex: 2;
        }

        .cityinfopanel-locationcell {
            font-size: 16px;
        }

        /* 城市信息面板 日期 */
        .cityinfopanel-date {
            flex: 5;
        }

        /* 城市信息面板 日期 */
        .cityinfopanel-datecell {
            height: 100%;
            flex: 3;
            font-size: 12px;
            text-align: right;
            line-height: 60px;
        }

        /* 城市信息面板 最底行表头列 */
        .cityinfopanel-tableheader {
            color: #0092d4;
        }
    </style>
    <script charset="utf-8" src="https://map.qq.com/api/js?v=2.exp&key=2RHBZ-FSF66-SHQS6-M4ANO-7NPKE-QIFP5"></script>
    <script>
    </script>
</head>

<body>

    <div class="wrap">
        <!--   定义地图显示容器   -->
        <div id="container"></div>
        <!-- 城市-渔场切换按钮 -->
        <div class="option_frame">
            <div class="option_button">
                <div class="city selected" id="city" onclick="javascript: City();">城市</div>
                <div class="fishery" id="fishery" onclick="javascript: Fishery();">渔场</div>
            </div>
        </div>
        <!-- 普通-卫星地图切换按钮 -->
        <div class="switchbutton" onclick="javascript: switchMap();">
            <div class="img" id="switch_img"></div>
        </div>
        <!-- 城市信息面板 -->
        <div class="cityinfopanel">
            <!-- 标题-日期 -->
            <div class="cityinfopanel-row cityinfopanel-firstrow">
                <div class="cityinfopanel-column cityinfopanel-location">
                    <div class="cityinfopanel-cell cityinfopanel-locationcell" id="cityQD_cityname"></div>
                </div>
                <div class="cityinfopanel-column cityinfopanel-date">
                    <div class="cityinfopanel-datecell" id="cityQD_date"></div>
                </div>
            </div>
            <!-- 表头 -->
            <div class="cityinfopanel-row">
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell"></div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell cityinfopanel-tableheader">潮时</div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell cityinfopanel-tableheader">潮位(cm)</div>
                </div>
            </div>
            <!-- 第一行数据 -->
            <div class="cityinfopanel-row">
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell">第一次高潮</div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_fht"></div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_fh"></div>
                </div>
            </div>
            <!-- 第二行数据 -->
            <div class="cityinfopanel-row">
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell">第一次低潮</div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_flt"></div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_fl"></div>
                </div>
            </div>
            <!-- 第三行数据 -->
            <div class="cityinfopanel-row">
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell">第二次高潮</div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_sht"></div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_sh"></div>
                </div>
            </div>
            <!-- 第四行数据 -->
            <div class="cityinfopanel-row">
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell">第二次低潮</div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_slt"></div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell" id="cityQD_sl"></div>
                </div>
            </div>
            <!-- 浪高-水温 -->
            <div class="cityinfopanel-row">
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell cityinfopanel-tableheader">浪高:&nbsp;</div>
                    <div class="cityinfopanel-cell" id="cityQD_wave"></div>
                </div>
                <div class="cityinfopanel-column">
                    <div class="cityinfopanel-cell cityinfopanel-tableheader">水温:&nbsp;</div>
                    <div class="cityinfopanel-cell" id="cityQD_temp"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        var map // 地图实体
        var mapdrag = false

        // 城市地图中的marker
        var markerCityQD,   // 青岛
            markerCityRZ,   // 日照
            markerCityYT,   // 烟台
            markerCityWH,   // 威海
            markerCityWF,   // 潍坊
            markerCityDY,   // 东营
            markerCityBZ    // 滨州

        // 渔场地图中的marker
        var markerFishBHWan,    // 渤海湾
            markerFishLZWan,    // 莱州湾
            markerFishYW,       // 烟威
            markerFishWD,       // 威东
            markerFishSDao,     // 石岛
            markerFishSDong,    // 石东
            markerFishQHai      // 青海

        // 渔场地图中的多边形
        var polygonBHWan,   // 渤海湾
            polygonLZWan,   // 莱州湾
            polygonYW,      // 烟威
            polygonWD,      // 威东
            polygonSDong,   // 石东
            polygonSDao,    // 石岛
            polygonQHai     // 青海
        
        // 城市信息面板数据
        var infoCityQD = {}
        var infoCityRZ = {}
        var infoCityYT = {}
        var infoCityWH = {}
        var infoCityWF = {}
        var infoCityDY = {}
        var infoCityBZ = {}

        window.onload = function () {
            //直接加载地图

            //初始化地图函数  自定义函数名init
            function init() {
                //定义map变量 调用 qq.maps.Map() 构造函数   获取地图显示容器
                map = new qq.maps.Map(document.getElementById("container"), {
                    center: new qq.maps.LatLng(36.79898, 120.292059),      // 地图的中心地理坐标。
                    zoom: 6,                                                 // 地图的中心地理坐标。
                    mapTypeControl: false,  // 切换卫星图按钮
                    // zoomControl: false      // 缩放按钮
                })

                // 
                /*
                var anchor = new qq.maps.Point(0, 39),
                    size = new qq.maps.Size(90, 115),
                    scaleSize = new qq.maps.Size(50, 62),
                    origin = new qq.maps.Point(0, 0), */

                // 城市Marker
                {
                    // 青岛城市图标
                    var iconCityQD = new qq.maps.MarkerImage(
                        "./Images/Qd_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 青岛城市Marker
                    markerCityQD = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(36.061865, 120.315579),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityQD.setIcon(iconCityQD)

                    // 日照城市图标
                    var iconCityRZ = new qq.maps.MarkerImage(
                        "./Images/Rz_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 日照城市Marker
                    markerCityRZ = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(35.423879, 119.570555),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityRZ.setIcon(iconCityRZ)

                    // 烟台城市图标
                    var iconCityYT = new qq.maps.MarkerImage(
                        "./Images/Yt_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 烟台城市Marker
                    markerCityYT = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(37.583791, 121.184684),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityYT.setIcon(iconCityYT)

                    // 威海城市图标
                    var iconCityWH = new qq.maps.MarkerImage(
                        "./Images/Wh_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 威海城市Marker
                    markerCityWH = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(37.493996, 122.139768),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityWH.setIcon(iconCityWH)

                    // 潍坊城市图标
                    var iconCityWF = new qq.maps.MarkerImage(
                        "./Images/Wf_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 潍坊城市Marker
                    markerCityWF = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(37.116516, 119.440566),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityWF.setIcon(iconCityWF)

                    // 东营城市图标
                    var iconCityDY = new qq.maps.MarkerImage(
                        "./Images/Dy_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 东营城市Marker
                    markerCityDY = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(37.432009, 118.92083),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityDY.setIcon(iconCityDY)

                    // 滨州城市图标
                    var iconCityBZ = new qq.maps.MarkerImage(
                        "./Images/Bz_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(0, 39),   // anchor
                        new qq.maps.Size(50, 62)    // scaleSize
                    )
                    // 滨州城市Marker
                    markerCityBZ = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(38.195308, 118.021037),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerCityBZ.setIcon(iconCityBZ)
                } // end-城市Marker

                // 渔场Marker
                {
                    // 渤海湾渔场图标
                    var iconFishBHWan = new qq.maps.MarkerImage(
                        "./Images/bhwan_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 渤海湾渔场Marker
                    markerFishBHWan = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(38.320428, 117.928101),
                        //设置显示Marker的地图
                        map: map,
                    })
                    markerFishBHWan.setIcon(iconFishBHWan)

                    // 莱州湾渔场图标
                    var iconFishLZWan = new qq.maps.MarkerImage(
                        "./Images/lz_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 莱州湾渔场Marker
                    markerFishLZWan = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(38.014877, 119.740845),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerFishLZWan.setIcon(iconFishLZWan)

                    // 烟威渔场图标
                    var iconFishYW = new qq.maps.MarkerImage(
                        "./Images/yw_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 烟威渔场Marker
                    markerFishYW = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(37.702614, 121.828248),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerFishYW.setIcon(iconFishYW)

                    // 威东渔场图标
                    var iconFishWD = new qq.maps.MarkerImage(
                        "./Images/wd_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 威东渔场Marker
                    markerFishWD = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(37.534009, 124.061219),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerFishWD.setIcon(iconFishWD)

                    // 石岛渔场图标
                    var iconFishSDao = new qq.maps.MarkerImage(
                        "./Images/sdao_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 石岛渔场Marker
                    markerFishSDao = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(36.455348, 122.390392),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerFishSDao.setIcon(iconFishSDao)

                    // 石东渔场图标
                    var iconFishSDong = new qq.maps.MarkerImage(
                        "./Images/sdong_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 石东渔场Marker
                    markerFishSDong = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(36.514972, 124.38853),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerFishSDong.setIcon(iconFishSDong)

                    // 青海渔场图标
                    var iconFishQHai = new qq.maps.MarkerImage(
                        "./Images/qhai_location.png",
                        new qq.maps.Size(90, 115),  // size
                        new qq.maps.Point(0, 0),    // origin
                        new qq.maps.Point(40, 20),   // anchor
                        new qq.maps.Size(90, 52)    // scaleSize
                    )
                    // 青海渔场Marker
                    markerFishQHai = new qq.maps.Marker({
                        //设置Marker的位置坐标
                        position: new qq.maps.LatLng(36.033695, 120.566718),
                        //设置显示Marker的地图
                        map: map
                    })
                    markerFishQHai.setIcon(iconFishQHai)
                } // end-渔场marker

                // 渔场多边形
                {
                    // 渤海湾渔场多边形
                    var pathBHWan = [
                        new qq.maps.LatLng(38.0016803226888, 117.5513364203396),
                        new qq.maps.LatLng(39.23219428943497, 117.5497830177721),
                        new qq.maps.LatLng(39.22612651053009, 119.0077355479573),
                        new qq.maps.LatLng(39.00033607794768, 119.0115242442486),
                        new qq.maps.LatLng(38.50033594944455, 119.0115241992825),
                        new qq.maps.LatLng(38.0003358200421, 119.0115241552156)
                    ]
                    polygonBHWan = new qq.maps.Polygon({
                        map: map,
                        path: pathBHWan,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })

                    // 莱州湾渔场多边形
                    var pathLZWan = [
                        new qq.maps.LatLng(38.00012612512063, 121.0001234114663),
                        new qq.maps.LatLng(37.5001259966175, 121.0001233665002),
                        new qq.maps.LatLng(37.50012603798632, 120.5001233845866),
                        new qq.maps.LatLng(37.50012607935514, 120.000123402673),
                        new qq.maps.LatLng(37.11691211859943, 119.9996784756812),
                        new qq.maps.LatLng(37.10917554781332, 119.0093974555282),
                        new qq.maps.LatLng(37.50012616209278, 119.0001234379464),
                        new qq.maps.LatLng(38.00012629059586, 119.0001234829125),
                        new qq.maps.LatLng(38.50012641909899, 119.0001235269792),
                        new qq.maps.LatLng(38.50012637773023, 119.5001235088929),
                        new qq.maps.LatLng(38.5001263363614, 120.0001234908066),
                        new qq.maps.LatLng(38.50012629499258, 120.5001234727201),
                        new qq.maps.LatLng(38.50012625362376, 121.0001234555331)

                    ]
                    polygonLZWan = new qq.maps.Polygon({
                        map: map,
                        path: pathLZWan,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })

                    // 烟威渔场多边形
                    var pathYW = [
                        new qq.maps.LatLng(38.00012587690776, 124.0001233038474),
                        new qq.maps.LatLng(37.50012574840463, 124.0001232597807),
                        new qq.maps.LatLng(37.50012578977345, 123.500123277867),
                        new qq.maps.LatLng(37.50012583114227, 123.0001232950541),
                        new qq.maps.LatLng(37.50012587251103, 122.5001233131404),
                        new qq.maps.LatLng(37.50012591387986, 122.0001233312269),
                        new qq.maps.LatLng(37.50012595524868, 121.5001233493132),
                        new qq.maps.LatLng(37.5001259966175, 121.0001233665002),
                        new qq.maps.LatLng(38.00012612512063, 121.0001234114663),
                        new qq.maps.LatLng(38.50012625362376, 121.0001234555331),
                        new qq.maps.LatLng(38.50012621225494, 121.5001234374467),
                        new qq.maps.LatLng(38.50012617178544, 122.0001234193604),
                        new qq.maps.LatLng(38.50012613041662, 122.5001234021734),
                        new qq.maps.LatLng(38.5001260890478, 123.0001233840869),
                        new qq.maps.LatLng(38.0001259596454, 123.0001233400202),
                        new qq.maps.LatLng(38.00012591827658, 123.5001233219339)
                    ]
                    polygonYW = new qq.maps.Polygon({
                        map: map,
                        path: pathYW,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })

                    // 威东渔场多边形
                    var pathWD = [
                        new qq.maps.LatLng(37.50012574840463, 124.0001232597807),
                        new qq.maps.LatLng(38.00012587690776, 124.0001233038474),
                        new qq.maps.LatLng(38.00012583553894, 124.5001232857611),
                        new qq.maps.LatLng(37.50012570703581, 124.5001232416943)
                    ]
                    polygonWD = new qq.maps.Polygon({
                        map: map,
                        path: pathWD,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })

                    // 石东渔场多边形
                    var pathSDong = [
                        new qq.maps.LatLng(36.50012540866072, 125.0001231354744),
                        new qq.maps.LatLng(36.00012527925827, 125.0001230914077),
                        new qq.maps.LatLng(36.00012532062709, 124.500123109494),
                        new qq.maps.LatLng(36.00012536199591, 124.000123126681),
                        new qq.maps.LatLng(36.50012549139836, 124.0001231716471),
                        new qq.maps.LatLng(37.0001256199015, 124.0001232157139),
                        new qq.maps.LatLng(37.50012574840463, 124.0001232597807),
                        new qq.maps.LatLng(37.50012570703581, 124.5001232416943),
                        new qq.maps.LatLng(37.50012566566699, 125.0001232236079),
                        new qq.maps.LatLng(37.00012553716385, 125.0001231795412)
                    ]
                    polygonSDong = new qq.maps.Polygon({
                        map: map,
                        path: pathSDong,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })

                    // 石岛渔场多边形
                    var pathSDao = [
                        new qq.maps.LatLng(37.50012574840463, 124.0001232597807),
                        new qq.maps.LatLng(37.0001256199015, 124.0001232157139),
                        new qq.maps.LatLng(36.50012549139836, 124.0001231716471),
                        new qq.maps.LatLng(36.00012536199591, 124.000123126681),
                        new qq.maps.LatLng(36.00012540336473, 123.5001231447674),
                        new qq.maps.LatLng(36.00012544473356, 123.0001231628537),
                        new qq.maps.LatLng(36.00012548610238, 122.5001231809401),
                        new qq.maps.LatLng(36.00012552747114, 122.0001231981272),
                        new qq.maps.LatLng(36.50012565597427, 122.0001232430933),
                        new qq.maps.LatLng(37.00012578537672, 122.00012328716),
                        new qq.maps.LatLng(37.00012574400796, 122.5001232690737),
                        new qq.maps.LatLng(37.50012587251103, 122.5001233131404),
                        new qq.maps.LatLng(37.50012583114227, 123.0001232950541),
                        new qq.maps.LatLng(37.50012578977345, 123.500123277867)
                    ]
                    polygonSDao = new qq.maps.Polygon({
                        map: map,
                        path: pathSDao,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })

                    // 青海渔场多边形
                    var pathQHai = [
                        new qq.maps.LatLng(37.00012578537672, 122.00012328716),
                        new qq.maps.LatLng(36.50012565597427, 122.0001232430933),
                        new qq.maps.LatLng(36.00012552747114, 122.0001231981272),
                        new qq.maps.LatLng(36.00012556883996, 121.5001232162135),
                        new qq.maps.LatLng(35.50012544033683, 121.5001231721467),
                        new qq.maps.LatLng(35.50012548170565, 121.0001231902331),
                        new qq.maps.LatLng(35.50012552217515, 120.5001232083195),
                        new qq.maps.LatLng(35.50012556354397, 120.0001232255065),
                        new qq.maps.LatLng(35.49996888905304, 119.6012450963841),
                        new qq.maps.LatLng(35.99897768497226, 119.6012450963841),
                        new qq.maps.LatLng(36.00012569294643, 120.0001232695734),
                        new qq.maps.LatLng(36.0001256515776, 120.5001232523863),
                        new qq.maps.LatLng(36.50012578008074, 120.500123296453),
                        new qq.maps.LatLng(36.50012573871192, 121.0001232783667),
                        new qq.maps.LatLng(37.00012586721505, 121.0001233224334),
                        new qq.maps.LatLng(37.00012582674555, 121.5001233052463)
                    ]
                    polygonQHai = new qq.maps.Polygon({
                        map: map,
                        path: pathQHai,
                        strokeColor: new qq.maps.Color(0, 0, 0, 0.8),
                        strokeWeight: 1,
                        fillColor: qq.maps.Color.fromHex("#FFFFFF", 0.5)
                    })
                } // end-渔场多边形

                qq.maps.event.addListener(map, 'click', function() {
                    cityInfoPanelHide()
                })
                // qq.maps.event.addListener(map, 'bounds_changed', function() {
                //     cityInfoPanelHide()
                // })
                qq.maps.event.addListener(map, 'dragstart', function() {
                    mapdrag = true
                })
                qq.maps.event.addListener(map, 'dragend', function() {
                    setTimeout(function(){   
                        mapdrag = false
                    }, 50)
                })

                // 城市marker添加点击事件
                {
                    qq.maps.event.addListener(markerCityQD, 'click', function(){
                        if (mapdrag === false) {
                            setCityInfoPanel(infoCityQD)
                            cityInfoPanelShow()
                        }
                    })
                }
            } // end-init()

            //调用初始化函数地图
            init()
            City()
            // requestData('http://123.234.129.238:8001/MyWebService.asmx/GetRefinedForecast_2018', 'name=admin&areaflg=山东&city=青岛', {})
            loadQD()

        } // end-window.onload()

        // 向服务器请求数据
        var requestData = function (url, data, output) {
            var xmlhttp = new XMLHttpRequest()
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState === XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE === 4
                    if (xmlhttp.status === 200) {
                        // console.log(xmlhttp.responseText)
                        var parser = new DOMParser()
                        var xmldoc = parser.parseFromString(xmlhttp.responseText, 'text/xml')
                        console.log(JSON.parse(xmldoc.getElementsByTagName('string')[0].innerHTML))
                        output = JSON.parse(xmldoc.getElementsByTagName('string')[0].innerHTML)
                    } else if (xmlhttp.status === 400) {
                        console.log('error 400')
                        alert('There was an error 400')
                    } else {
                        console.log('something else other than 200 was returned')
                        console.log(xmlhttp.responseText)
                    }
                }
            } // end-xmlhttp.onreadystatechange()
            xmlhttp.open('POST', url, false)
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlhttp.send(data)
        } // end-requestData()

        var loadQD = function () {
            var url = 'http://123.234.129.238:8001/MyWebService.asmx/GetRefinedForecast_2018'
            var data = 'name=admin&areaflg=山东&city=青岛'
            var xmlhttp = new XMLHttpRequest()
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState === XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE === 4
                    if (xmlhttp.status === 200) {
                        // console.log(xmlhttp.responseText)
                        var parser = new DOMParser()
                        var xmldoc = parser.parseFromString(xmlhttp.responseText, 'text/xml')
                        var res = JSON.parse(xmldoc.getElementsByTagName('string')[0].innerHTML)
                        console.log(res)
                        var date = new Date()
                        var todaystring = (date.getMonth() + 1) + '月' + date.getDate() + '日' + '0时'
                        date.setDate(date.getDate() + 1)
                        var tomorrowstring = (date.getMonth() + 1) + '月' + date.getDate() + '日' + '0时'
                        var fhtime = ''
                        var fltime = ''
                        var shtime = ''
                        var sltime = ''
                        if (res.DYFP.tide[0].FIRSTHIGHTIME === '-') {
                            fhtime = '-:-'
                        } else {
                            fhtime = timeFormat(res.DYFP.tide[0].FIRSTHIGHTIME)
                        }
                        if (res.DYFP.tide[0].FIRSTLOWTIME === '-') {
                            fltime = '-:-'
                        } else {
                            fltime = timeFormat(res.DYFP.tide[0].FIRSTLOWTIME)
                        }
                        if (res.DYFP.tide[0].SECONDHIGHTIME === '-') {
                            shtime = '-:-'
                        } else {
                            shtime = timeFormat(res.DYFP.tide[0].SECONDHIGHTIME)
                        }
                        if (res.DYFP.tide[0].SECONDLOWTIME === '-') {
                            sltime = '-:-'
                        } else {
                            sltime = timeFormat(res.DYFP.tide[0].SECONDLOWTIME)
                        }
                        infoCityQD = {
                            location: '青岛近海',
                            date: todaystring + '~' + tomorrowstring,
                            firsthightime: fhtime,
                            firstlowtime: fltime,
                            secondhightime: shtime,
                            secondlowtime: sltime,
                            firsthigh: res.DYFP.tide[0].FIRSTHIGHLEVEL,
                            firstlow: res.DYFP.tide[0].FIRSTLOWLEVEL,
                            secondhigh: res.DYFP.tide[0].SECONDHIGHLEVEL,
                            secondlow: res.DYFP.tide[0].SECONDLOWLEVEL,
                            waveheight: res.DYFP.wave[0].WAVEHEIGHT,
                            temperature: res.DYFP.temperature[0].WATERTEMPERATURE
                        }
                        /*
                        document.getElementById('cityQD_cityname').innerHTML = infoCityQD.location
                        document.getElementById('cityQD_date').innerHTML = infoCityQD.date
                        document.getElementById('cityQD_fht').innerHTML = infoCityQD.firsthightime
                        document.getElementById('cityQD_fh').innerHTML = infoCityQD.firsthigh
                        document.getElementById('cityQD_flt').innerHTML = infoCityQD.firstlowtime
                        document.getElementById('cityQD_fl').innerHTML = infoCityQD.firstlow
                        document.getElementById('cityQD_sht').innerHTML = infoCityQD.secondhightime
                        document.getElementById('cityQD_sh').innerHTML = infoCityQD.secondhigh
                        document.getElementById('cityQD_slt').innerHTML = infoCityQD.secondlowtime
                        document.getElementById('cityQD_sl').innerHTML = infoCityQD.secondlow
                        document.getElementById('cityQD_wave').innerHTML = infoCityQD.waveheight + 'm'
                        document.getElementById('cityQD_temp').innerHTML = infoCityQD.temperature.trim() + '℃'
                        */

                    } else if (xmlhttp.status === 400) {
                        console.log('error 400')
                        alert('There was an error 400')
                    } else {
                        console.log('something else other than 200 was returned')
                        console.log(xmlhttp.responseText)
                    }
                }
            } // end-xmlhttp.onreadystatechange()
            xmlhttp.open('POST', url, true)
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlhttp.send(data)
        } // end-loadQD()
        
        // 将####格式时间转为##:##格式
        var timeFormat = function (time) {
            return time.substring(0, 2) + ':' + time.substring(2)
        }

        // 顶部城市按钮点击
        var City = function () {
            console.log('City clicked!')
            // 改变按钮颜色
            selectCity()
            // 改变地图中心
            map.panTo(new qq.maps.LatLng(36.79898, 120.292059))
            // 显示城市marker
            markerCityQD.setVisible(true)
            markerCityRZ.setVisible(true)
            markerCityYT.setVisible(true)
            markerCityWH.setVisible(true)
            markerCityWF.setVisible(true)
            markerCityDY.setVisible(true)
            markerCityBZ.setVisible(true)
            // 隐藏渔场marker
            markerFishBHWan.setVisible(false)
            markerFishLZWan.setVisible(false)
            markerFishYW.setVisible(false)
            markerFishWD.setVisible(false)
            markerFishSDao.setVisible(false)
            markerFishSDong.setVisible(false)
            markerFishQHai.setVisible(false)
            // 隐藏渔场多边形
            polygonBHWan.setVisible(false)
            polygonLZWan.setVisible(false)
            polygonYW.setVisible(false)
            polygonWD.setVisible(false)
            polygonSDong.setVisible(false)
            polygonSDao.setVisible(false)
            polygonQHai.setVisible(false)
        }
        // 顶部渔场按钮点击
        var Fishery = function () {
            console.log('fishery clicked!')
            // 改变按钮颜色
            selectFishery()
            // 改变地图中心
            map.panTo(new qq.maps.LatLng(37.246322, 121.527899))
            // 隐藏城市marker
            markerCityQD.setVisible(false)
            markerCityRZ.setVisible(false)
            markerCityYT.setVisible(false)
            markerCityWH.setVisible(false)
            markerCityWF.setVisible(false)
            markerCityDY.setVisible(false)
            markerCityBZ.setVisible(false)
            // 显示渔场marker
            markerFishBHWan.setVisible(true)
            markerFishLZWan.setVisible(true)
            markerFishYW.setVisible(true)
            markerFishWD.setVisible(true)
            markerFishSDao.setVisible(true)
            markerFishSDong.setVisible(true)
            markerFishQHai.setVisible(true)
            // 显示渔场多边形
            polygonBHWan.setVisible(true)
            polygonLZWan.setVisible(true)
            polygonYW.setVisible(true)
            polygonWD.setVisible(true)
            polygonSDong.setVisible(true)
            polygonSDao.setVisible(true)
            polygonQHai.setVisible(true)
        }
        // 顶部城市-渔场按钮切换点击样式用
        /*
        $(function () {
            $(".option_button").children().click(function () {
                $(this).addClass("selected").siblings().removeClass("selected")
            })
        })
        */
        var selectCity = function () {
            var divcity = document.getElementById('city')
            divcity.className = 'city selected'
            var divfishery = document.getElementById('fishery')
            divfishery.className = 'fishery'
        }
        var selectFishery = function () {
            cityInfoPanelHide()
            var divcity = document.getElementById('city')
            divcity.className = 'city'
            var divfishery = document.getElementById('fishery')
            divfishery.className = 'fishery selected'
        }
        // 切换普通-卫星地图
        var switchMap = function () {
            console.log('switch button clicked!')
            if (map.getMapTypeId() === qq.maps.MapTypeId.ROADMAP) {
                map.setMapTypeId(qq.maps.MapTypeId.HYBRID)
            } else {
                map.setMapTypeId(qq.maps.MapTypeId.ROADMAP)
            }
        }
    
        // 显示城市信息面板
        var cityInfoPanelShow = function () {
            var divarr = document.getElementsByClassName('cityinfopanel')
            divarr[0].style.display = "flex"
        }

        // 关闭城市信息面板
        var cityInfoPanelHide = function () {
            var divarr = document.getElementsByClassName('cityinfopanel')
            divarr[0].style.display = "none"
        }

        // 填写城市信息面板
        var setCityInfoPanel = function (obj) {
            document.getElementById('cityQD_cityname').innerHTML = obj.location
            document.getElementById('cityQD_date').innerHTML = obj.date
            document.getElementById('cityQD_fht').innerHTML = obj.firsthightime
            document.getElementById('cityQD_fh').innerHTML = obj.firsthigh
            document.getElementById('cityQD_flt').innerHTML = obj.firstlowtime
            document.getElementById('cityQD_fl').innerHTML = obj.firstlow
            document.getElementById('cityQD_sht').innerHTML = obj.secondhightime
            document.getElementById('cityQD_sh').innerHTML = obj.secondhigh
            document.getElementById('cityQD_slt').innerHTML = obj.secondlowtime
            document.getElementById('cityQD_sl').innerHTML = obj.secondlow
            document.getElementById('cityQD_wave').innerHTML = obj.waveheight + 'm'
            document.getElementById('cityQD_temp').innerHTML = obj.temperature.trim() + '℃'
        }
    </script>
</body>

</html>